<!doctype html>
<html ng-app="clang.todo">
  <head>
    <script src="js/angular.js"></script>
    <script src="js/clang_dbg.js"></script>
    <link rel="stylesheet" href="css/clang.css">
  </head>
  <body>
    <h2>Basic Todo sample with clojure data</h2>
    <div ng-controller="TodoCtrl">
      <span>{{(remaining)}} {{(archive)}} of {{(count todos)}} remaining</span>
      [ <a href="" ng-click="(archive)">archive</a> ]

      <ul class="unstyled">
        <li clang-repeat="todo in todos">
        <div>
          <input type="checkbox" ng-true-value="yes" ng-false-value="no" ng-model="todos [$index :done]">
          <span class="done-{{:done}}">{{:text}}</span>
          <br>
          These inputs don't work for data entry
          <br>
          <input type="text" ng-model="todos [$index :email]">
          <input type="text" ng-model="todos [$index :email]">
        </div>
        <div>
          The following controls do work because they are only bound to the
          local scope.
          <br>
          They would have to be explicitly persisted by the controller to be saved
          <br>
          <input type="text" ng-model="todo :email">
          <input type="text" ng-model="todo :email">
          <input type="radio" value="yes" ng-model="todo :done">
          <input type="radio" value="no" ng-model="todo :done">
        </li>
      </ul>
      <form ng-submit="(addTodo)">
        <input type="text" ng-model="todoText"  size="30"
               placeholder="add new todo here">
        <input class="btn-primary" type="submit" value="add">
      </form>
      <pre>{{todos}}</pre>
    </div>

    <hr />
    <div ng-controller="TodoCtrl">
      <h2>Function composition within template expressions</h2>
      <table>
        <tr clang-repeat="group in (drop 1 (partition 3 nums))">
          <td clang-repeat="x in (map (juxt identity odd?) group)">
            {{x}}: {{(first x)}} + 1 = {{addone(x)}} = {{(addone x)}}. {{(first x)}} is {{(if (last x) "odd" "even")}}
          </td>
        </tr>
      </table>
    </div>

    <hr />
    <h2>Basic Todo sample with clojure data in atoms</h2>
    <div ng-controller="AtomTodoCtrl">
      <span>{{(remaining)}} of {{(count @todos)}} remaining</span>
      [ <a href="" ng-click="archive()">archive</a> ]
      <ul class="unstyled">
        <li clang-repeat="todo in @todos">
          <input type="text" ng-model="@todo :email">
          <input type="text" ng-model="@todo :email">
          <input type="checkbox" ng-model="@todo :done">
          <span class="done-{{:done @todo}}">{{:text @todo}}</span>
        </li>
      </ul>
      <form ng-submit="(addTodo)">
        <input type="text" ng-model="todoText"  size="30"
               placeholder="add new todo here">
        <input class="btn-primary" type="submit" value="add">
      </form>
    </div>
  </body>
</html>
